{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Jos%C3%A9%20Luis%20CS/Documents/Modular/proyecto/v5/gantt-flow/front/app/admin/users/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Image from \"next/image\";\r\nimport Link from \"next/link\";\r\nimport Button from \"../../../components/button\";\r\n\r\ninterface User {\r\n    _id: string;\r\n    name: string;\r\n    email: string;\r\n}\r\n\r\nexport default function Dashboard() {\r\n    const router = useRouter();\r\n    const [date, setDate] = useState('');\r\n    const [user, setUser] = useState<{ name: string } | null>(null);\r\n    const [users, setUsers] = useState<User[]>([]);\r\n    const [editingUser, setEditingUser] = useState<User | null>(null);\r\n\r\n    const fetchUsers = async () => {\r\n        try {\r\n            const response = await fetch('/api/admin/users');\r\n            const data = await response.json();\r\n            setUsers(data);\r\n        } catch (error) {\r\n            console.error('Error al obtener los usuarios:', error);\r\n        }\r\n    };\r\n\r\n    const handleEditUser = (user: User) => {\r\n        setEditingUser(user);\r\n    };\r\n\r\n    const handleSaveUser = async (updatedUser: User) => {\r\n        try {\r\n            const response = await fetch(`/api/admin/users/${updatedUser._id}`, {\r\n                method: 'PUT',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(updatedUser),\r\n            });\r\n            if (response.ok) {\r\n                fetchUsers();\r\n                setEditingUser(null);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error al actualizar el usuario:', error);\r\n        }\r\n    };\r\n\r\n    const handleDeleteUser = async (userId: string) => {\r\n        try {\r\n            const response = await fetch(`/api/admin/users/${userId}`, {\r\n                method: 'DELETE',\r\n            });\r\n            if (response.ok) {\r\n                fetchUsers();\r\n            }\r\n        } catch (error) {\r\n            console.error('Error al eliminar el usuario:', error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const token = localStorage.getItem('token');\r\n        const userData = localStorage.getItem('user');\r\n\r\n        if (!token || !userData) {\r\n            router.push('/auth/login');\r\n        } else {\r\n            setUser(JSON.parse(userData));\r\n        }\r\n\r\n        const today = new Date();\r\n        const formattedDate = `${today.toLocaleDateString('es-MX', { weekday: 'long' })}, ${today.getDate()} de ${today.toLocaleDateString('es-MX', { month: 'long' })} de ${today.getFullYear()}`;\r\n        setDate(formattedDate);\r\n\r\n        fetchUsers();\r\n    }, [router]);\r\n\r\n    const handleLogout = () => {\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('user');\r\n        router.push('/auth/login');\r\n    };\r\n\r\n    if (!user) {\r\n        return <p>Cargando...</p>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex flex-col m-4 mx-4\">\r\n            {/* Header y barra lateral */}\r\n            {/* ... (código existente) ... */}\r\n\r\n            {/* Tabla de usuarios */}\r\n            <div className=\"mt-8\">\r\n                <h2 className=\"text-2xl font-bold mb-4\">Gestión de Usuarios</h2>\r\n                <table className=\"min-w-full bg-white border border-gray-300\">\r\n                    <thead>\r\n                        <tr className=\"bg-green-500\">\r\n                            <th className=\"py-2 px-4 border-b\">Nombre</th>\r\n                            <th className=\"py-2 px-4 border-b\">Email</th>\r\n                            <th className=\"py-2 px-4 border-b\">Acciones</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {users.map((user) => (\r\n                            <tr key={user._id}>\r\n                                <td className=\"py-2 px-4 border-b\">\r\n                                    {editingUser?._id === user._id ? (\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={editingUser.name}\r\n                                            onChange={(e) =>\r\n                                                setEditingUser({ ...editingUser, name: e.target.value })\r\n                                            }\r\n                                        />\r\n                                    ) : (\r\n                                        user.name\r\n                                    )}\r\n                                </td>\r\n                                <td className=\"py-2 px-4 border-b\">\r\n                                    {editingUser?._id === user._id ? (\r\n                                        <input\r\n                                            type=\"email\"\r\n                                            value={editingUser.email}\r\n                                            onChange={(e) =>\r\n                                                setEditingUser({ ...editingUser, email: e.target.value })\r\n                                            }\r\n                                        />\r\n                                    ) : (\r\n                                        user.email\r\n                                    )}\r\n                                </td>\r\n                                <td className=\"py-2 px-4 border-b\">\r\n                                    {editingUser?._id === user._id ? (\r\n                                        <button\r\n                                            onClick={() => handleSaveUser(editingUser)}\r\n                                            className=\"bg-blue-500 text-white px-4 py-1 rounded\"\r\n                                        >\r\n                                            Guardar\r\n                                        </button>\r\n                                    ) : (\r\n                                        <button\r\n                                            onClick={() => handleEditUser(user)}\r\n                                            className=\"bg-yellow-500 text-white px-4 py-1 rounded\"\r\n                                        >\r\n                                            Editar\r\n                                        </button>\r\n                                    )}\r\n                                    <button\r\n                                        onClick={() => handleDeleteUser(user._id)}\r\n                                        className=\"bg-red-500 text-white px-4 py-1 rounded ml-2\"\r\n                                    >\r\n                                        Eliminar\r\n                                    </button>\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 272, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 282, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Jos%C3%A9%20Luis%20CS/Documents/Modular/proyecto/v5/gantt-flow/front/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0]}},
    {"offset": {"line": 283, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}